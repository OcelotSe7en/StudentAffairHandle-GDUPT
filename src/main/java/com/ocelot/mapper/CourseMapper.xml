<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- classtable -->
<mapper namespace="com.ocelot.mapper.CourseMapper">
    <!-- 字段映射 -->
    <resultMap id="courseMap" type="com.ocelot.model.Course">

        <result column="course_name" property="courseName" jdbcType="VARCHAR" />
        <result column="course_teacher" property="courseTeacher" jdbcType="VARCHAR" />
        <result column="course_location" property="courseLocation" jdbcType="VARCHAR" />
        <result column="course_week_day" property="courseWeekDay" jdbcType="VARCHAR" />
        <result column="course_class" property="courseClass" jdbcType="VARCHAR" />
        <result column="course_week" property="courseWeek" jdbcType="VARCHAR" />
        <result column="course_school_year_term" property="courseSchoolYearTerm" jdbcType="VARCHAR" />
        <result column="studentId" property="studentId" jdbcType="BIGINT" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 表查询字段 -->
    <sql id="allColumns">
        c.course_name, c.course_teacher, c.course_location, c.course_week_day, c.course_class, c.course_week, c.course_school_year_term,
        c.student_id
    </sql>
    <!-- This code was generated by TableGo tools, mark 1 end. -->

    <!-- 根据条件参数查询列表 -->
    <select id="selectCourseTableByCondition" resultMap="courseMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM classtable c WHERE 1 = 1
        <if test="courseName != null and courseName != ''">
            AND c.course_name LIKE CONCAT('%', #{courseName}, '%')
        </if>
        <if test="courseTeacher != null and courseTeacher != ''">
            AND c.course_teacher LIKE CONCAT('%', #{courseTeacher}, '%')
        </if>
        <if test="courseLocation != null and courseLocation != ''">
            AND c.course_location LIKE CONCAT('%', #{courseLocation}, '%')
        </if>
        <if test="courseWeekDay != null and courseWeekDay != ''">
            AND c.course_week_day LIKE CONCAT('%', #{courseWeekDay}, '%')
        </if>
        <if test="courseClass != null and courseClass != ''">
            AND c.course_class LIKE CONCAT('%', #{courseClass}, '%')
        </if>
        <if test="courseWeek != null and courseWeek != ''">
            AND c.course_week LIKE CONCAT('%', #{courseWeek}, '%')
        </if>
        <if test="courseSchoolYear != null and courseSchoolYear != ''">
            AND c.course_school_year_term LIKE CONCAT('%', #{courseSchoolYear}, '%')
        </if>
        <if test="studentId != null and studentId != ''">
            AND c.student_id LIKE CONCAT('%', #{studentId}, '%')
        </if>
    </select>
    <!-- 查询用户的课表 -->
    <select id="selectCourseTable" resultMap="courseMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM classtable c WHERE 1 = 1
        <if test="studentId != null and studentId != ''">
            AND c.student_id LIKE CONCAT('%', #{studentId}, '%')
        </if>
        <if test="courseSchoolYear != null and courseSchoolYear != ''">
            AND c.course_school_year_term LIKE CONCAT('%', #{courseSchoolYear}, '%')
        </if>
    </select>

    <!-- 新增信息 -->
    <insert id="addCourseTable" parameterType="map">
        INSERT INTO classtable (
            course_name, course_teacher, course_location, course_week_day, course_class, course_week, course_school_year_term,
            student_id
        ) VALUES (
                     #{courseName},
                     #{courseTeacher},
                     #{courseLocation},
                     #{courseWeekDay},
                     #{courseClass},
                     #{courseWeek},
                     #{courseSchoolYear},
                     #{studentId}
                 )
    </insert>

    <!-- 批量新增信息 -->
    <insert id="addClasstables" parameterType="list">
        INSERT INTO classtable (
        course_name, course_teacher, course_location, course_week_day, course_class, course_week, course_school_year_term,
        student_id
        ) VALUES
        <foreach collection="list" index="index" item="item" separator=",">
            (
            #{item.courseName},
            #{item.courseTeacher},
            #{item.courseLocation},
            #{item.courseWeekDay},
            #{item.courseClass},
            #{item.courseWeek},
            #{item.courseSchoolYear},
            #{item.studentId}
            )
        </foreach>
    </insert>

</mapper>