<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- quality_expansion_activities -->
<mapper namespace="com.ocelot.mapper.QualityExpansionActivitiesMapper">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="qualityExpansionActivitiesMap" type="com.ocelot.model.QualityExpansionActivity">
        <result column="activity_name" property="activityName" jdbcType="VARCHAR" />
        <result column="activity_school_year_term" property="activitySchoolYearTerm" jdbcType="VARCHAR" />
        <result column="activity_time" property="activityTime"/>
        <result column="activity_score" property="activityScore" jdbcType="VARCHAR" />
        <result column="activity_sensor_status" property="activitySensorStatus" jdbcType="VARCHAR" />
        <result column="activity_sensor_time" property="activitySensorTime"/>
        <result column="student_id" property="studentId" jdbcType="BIGINT" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->

    <!-- 表查询字段 -->
    <sql id="allColumns">
        qea.activity_name, qea.activity_school_year_term, qea.activity_time, qea.activity_score, qea.activity_sensor_status, qea.activity_sensor_time, qea.activity.student_id
    </sql>

    <!-- 根据条件参数查询列表 -->
    <select id="findQualityExpansionActivitiesByCondition" resultMap="qualityExpansionActivitiesMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM quality_expansion_activities qea WHERE 1 = 1
        <if test="activityName != null and activityName != ''">
            AND qea.activity_name LIKE CONCAT('%', #{activityName}, '%')
        </if>
        <if test="activitySchoolYearTerm != null and activitySchoolYearTerm != ''">
            AND qea.activity_school_year_term LIKE CONCAT('%', #{activitySchoolYearTerm}, '%')
        </if>
        <if test="activityTime != null">
            AND qea.activity_time = #{activityTime}
        </if>
    </select>

    <select id="selectQEActivitiesByStudentId" resultMap="qualityExpansionActivitiesMap" parameterType="map">
        SELECT
        <include refid="allColumns" />
        FROM quality_expansion_activities qea WHERE 1 = 1
        <if test="activityName != null and activityName != ''">
            AND qea.student_id LIKE CONCAT('%', #{studentId} '%')
        </if>
    </select>

    <!-- 新增信息 -->
    <insert id="addQEActivities" parameterType="map">
        INSERT INTO quality_expansion_activities (
            activity_name, activity_school_year_term, activity_time,
            activity_score, activity_sensor_status, activity_sensor_time, student_id
        ) VALUES (
                     #{activityName},
                     #{activitySchoolYearTerm},
                     #{activityTime},
                     #{activityScore},
                     #{activitySensorStatus},
                     #{activitySensorTime},
                     #{studentId}
                 )
    </insert>

    <!-- 批量新增信息 -->
    <insert id="addMultipleQEActivities" parameterType="list">
        INSERT INTO quality_expansion_activities (
        activity_name, activity_school_year_term, activity_time, activity_score,
        activity_sensor_status, activity_sensor_time, student_id
        ) VALUES
        <foreach collection="list" index="index" item="item" separator=",">
            (
            #{item.activityName},
            #{item.activitySchoolYearTerm},
            #{item.activityTime},
            #{item.activityScore},
            #{item.activitySensorStatus},
            #{item.activitySensorTime},
            #{item.studentId}
            )
        </foreach>
    </insert>

</mapper>